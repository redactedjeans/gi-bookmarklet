<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Teyvat Interactive Map Bookmarklets</title>
    <link rel="shortcut icon"
      href="https://webstatic-sea.mihoyo.com/upload/static-resource/2021/09/06/1ec1d1e2afbcc99f8f8c58eabb88a69d_6727693607076959720.png">

    <style>
      * { box-sizing: border-box; }
      :root { font-size: 62.5%; }
      html, body, h1 {  margin: 0; }
      body { font-family: sans-serif; font-size: 1.5rem; padding: 1rem; }
    </style>
  </head>
  <body>
    <h1>Teyvat Interactive Map Bookmarklets</h1>
    <ul id="bookmarklets"></ul>

    <script>
      // function name => relative path
      const fns = {
        'Compact Sidebar': 'src/compact-sidebar.js',
      };

      const ul = document.getElementById('bookmarklets');
      for (name of Object.keys(fns)) {
        fetch(`./${fns[name]}`)
          .then(resp => resp.text())
          .then(tpl => {
            li = document.createElement('li');
            a = document.createElement('a');
            a.textContent = `Teyvat Interactive Map | ${name}`;
            // TODO: also remove comments
            a.href = tpl
              .replace('{url}', window.location.toString().replace(/\/$/, ''))
              .replace(/\r?\n\s*/g, '');
            li.appendChild(a);
            ul.appendChild(li);
          })
          .catch(err => console.error(err));
      }
    </script>
  </body>
</html>