<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Teyvat Interactive Map Bookmarklets</title>
    <link rel="shortcut icon"
      href="https://webstatic-sea.mihoyo.com/upload/static-resource/2021/09/06/1ec1d1e2afbcc99f8f8c58eabb88a69d_6727693607076959720.png">

    <style>
      * { box-sizing: border-box; }
      :root { font-size: 62.5%; }
      html, body, h1 { margin: 0; }
      body { font-family: sans-serif; font-size: 1.5rem; padding: 1rem; }
      .bookmarklets > li { margin-bottom: 1rem; }
      .bookmarklets .desc { font-style: italic; color: #444; line-height: 3rem; }
      .badge {
        font-style: normal;
        font-weight: bold;
        font-size: 75%;
        color: var(--color);
        border-radius: 1rem;
        border: 2px solid var(--color);
        padding: 0 .3rem;
      }
      .badge.wip { --color: #922; }
    </style>
  </head>
  <body>
    <h1>Teyvat Interactive Map Bookmarklets</h1>
    <ul class="bookmarklets">
      <li>
        <a class="fn" data-path="src/compact-sidebar">Compact Sidebar</a>
        <div class="desc">A more compact sidebar.</div>
      </li>
      <li>
        <a class="fn" data-path="src/collapse-resources">Collapse Resources</a>
        <div class="desc">
          <span class="badge wip">WIP</span>
          Automatically collapse non-collectible resources in the sidebar.
        </div>
      </li>
      <li>
        <a class="fn" data-path="src/hide-completed">Hide Completed</a>
        <div class="desc">
          <span class="badge wip">WIP</span>
          Remove completed options from the sidebar and their pins from the map.
        </div>
      </li>
    </ul>

    <script>
      document.querySelectorAll('.bookmarklets .fn')
        .forEach(fn => {
          fetch(`./${fn.dataset.path}/main.js`)
            .then(resp => resp.text())
            .then(tpl => {
              fn.href = tpl
                // replace "static" values
                .replace('{url}', window.location.toString().replace(/\/$/, ''))
                // TODO: replace dynamic values (?)
                // TODO: remove comments
                // remove newlines
                .replace(/\r?\n\s*/g, '');
            })
            .catch(err => console.error(err));
        });
    </script>
  </body>
</html>